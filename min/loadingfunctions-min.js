function loadInt(){loadJSON(url,gotData,"jsonp")}function loadCity(){url=baseurl+formCity.value()+type+mode+appid+unit+lang,loadJSON(url,gotData,"jsonp")}function currentlocationtocurrentcity(o){var t="http://api.openweathermap.org/data/2.5/forecast?";geolat=o.coords.latitude,geolong=o.coords.longitude,url=t+"lat="+geolat+"&lon="+geolong+type+mode+appid+unit+lang,loadJSON(url,gotData,"jsonp"),setInterval(loadInt,5e5)}function currentlocationerror(o){switch(o.code){case o.PERMISSION_DENIED:loadInt();break;case o.POSITION_UNAVAILABLE:loadInt();break;case o.PERMISSION_DENIED_TIMEOUT:loadInt();break;case o.UNKNOWN_ERROR:loadInt()}}function gotData(o){weatherData=o,city=o.city.name,country=o.city.country,lon=o.city.coord.lon,lat=o.city.coord.lat,console.log(city+", "+country),console.log(lon),formCity.value(city+", "+country),windSpeed=1.2*o.list[0].wind.speed,o.list[0].rain?(amountRain=o.list[0].rain["3h"],amountRain=round(200*amountRain)):amountRain=0,o.list[0].snow?(amountSnow=o.list[0].snow["3h"],amountSnow=round(200*amountSnow)):amountSnow=0,temperature=o.list[0].main.temp,tempColor=o.list[0].main.temp,weatherType=o.list[0].weather[0].id,weatherDescription=o.list[0].weather[0].description,weatherTime=o.list[0].dt,loadTimeatlocation(lon,lat,weatherTime),convertTimestamp(weatherTime),console.log(hours),console.log(o)}function reloadCity(){loadCity(),clouds=[]}function convertTimestamp(o){return console.log(o),date=new Date(1e3*o),console.log(date),hours=date.getHours(),console.log(hours),date}function loadTimeatlocation(o,t,a){var e="&key=AIzaSyARQPqPeZ3TQLPE0FLqh3TAezFnGw_I9xA",n="https://maps.googleapis.com/maps/api/timezone/json?location="+t+","+o+"&timestamp="+a+"&key="+e;loadJSON(n,currentlocationerror,"jsonp"),console.log(n)}