function preload(){loadJSON(url);for(var e=0;weathericonsAmount>e;e++)weathericon[e]=loadImage("../images/weather"+e+".png")}function setup(){var e=createCanvas(windowWidth,windowHeight);e.position(0,0),loadJSON(url,gotData,"jsonp"),setInterval(loadInt,1e5),setInterval(raindropPush,100),setInterval(snowflakePush,100),weerbeerPush(),setInterval(weerbeerPush,1250),setTimeout(backgroundColorCalculator,1250),tempColorMappedR=200,tempColorMappedR=200,tempColorMappedR=200}function draw(){if(background(tempColorMappedR,tempColorMappedG,tempColorMappedB),weatherData){weerbeer.display();for(var e=raindrops.length-1;e>0;e--)raindrops[e].update(),raindrops[e].display(),raindrops[e].lifespancheck()&&raindrops.splice(e,1);for(var e=snowflakes.length-1;e>0;e--)snowflakes[e].update(),snowflakes[e].display(),snowflakes[e].lifespancheck()&&snowflakes.splice(e,1)}}function loadInt(){loadJSON(url,gotData,"jsonp")}function gotData(e){weatherData=e,windSpeed=1.2*e.list[0].wind.speed,e.list[0].rain?(amountRain=e.list[0].rain["3h"],amountRain=round(100*amountRain)):amountRain=0,e.list[0].snow?(amountSnow=e.list[0].snow["3h"],amountSnow=round(100*amountSnow)):amountSnow=0,tempColor=e.list[0].main.temp,weatherType=e.list[0].weather[0].id}function backgroundColorCalculator(){return tempColorMappedR=round(map(hour(),0,23,0,20)),tempColorMappedG=tempColorMappedR,tempColorMappedB=round(map(tempColor,-20,40,0,100)),tempColorMappedR;return tempColorMappedG;return tempColorMappedB}var baseurl="http://api.openweathermap.org/data/2.5/forecast?q=",city="stockholm",mode="JSON",appid="&appid=2de143494c0b295cca9337e1e96b00e0",lang="&lang=en",unit="&units=metric",url=baseurl+city+mode+appid+unit+lang,weatherData,windSpeed,amountRain,amountSnow,tempColor,weatherType,tempColorMappedR=0,tempColorMappedG=0,tempColorMappedB=0,raindrops=[],snowflakes=[],weerbeer,weathericon=[],weathericonsAmount=3,direction=1;