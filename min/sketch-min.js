function preload(){standardFont=loadFont("fonts/Cof.ttf");for(var e=0;weathericonsAmount>e;e++)weathericon[e]=loadImage("images/weather"+e+".png");for(var e=0;3>e;e++)cloudicons[e]=loadImage("images/clouds"+e+".png");for(var e=0;2>e;e++)nightordayicon[e]=loadImage("images/nightorday"+e+".png")}function setup(){var e=createCanvas(windowWidth,windowHeight);e.position(0,0),formCity=select("#formCity"),navigator.geolocation&&navigator.geolocation.getCurrentPosition(currentlocationtocurrentcity,currentlocationerror),responsiveScaleCalc(),fill(255),textFont(standardFont),textSize(textsizestandard),clearbutton=select(".clearbutton"),clearbutton.mousePressed(clearPressed),setInterval(raindropPush,400),setInterval(snowflakePush,400),cloudPush(),setInterval(cloudPush,5e3),weerbeerPush(),setInterval(weerbeerPush,1250),nightordayPush(),setInterval(nightordayPush,1250),tempColorMappedR=200,tempColorMappedR=200,tempColorMappedR=200,keyPressed()}function draw(){if(background(26,35,38),weatherData){for(var e=clouds.length-1;e>0;e--)clouds[e].update(),clouds[e].display(),clouds[e].lifespancheck()&&clouds.splice(e,1);weerbeer.display(),nightorday.display(),temperaturePush();for(var e=raindrops.length-1;e>0;e--)raindrops[e].update(),raindrops[e].display(),raindrops[e].lifespancheck()&&raindrops.splice(e,1);for(var e=snowflakes.length-1;e>0;e--)snowflakes[e].update(),snowflakes[e].display(),snowflakes[e].lifespancheck()&&snowflakes.splice(e,1)}}function keyPressed(){keyCode===ENTER&&reloadCity()}function clearPressed(){formCity.value("")}function temperaturePush(){push(),text(floor(temperature)+"*C",32,windowHeight-60),pop(),push(),textSize(textsizestandard/2),text(weatherDescription,32,windowHeight-32),pop()}function responsiveScaleCalc(){var e=windowWidth/1e3;if(windowWidth>windowHeight&&windowWidth<990&&windowHeight<800){var e=windowWidth/2e3;responsiveRatio=constrain(e,minRespL,maxRespL)}else{var e=windowHeight/1e3;responsiveRatio=constrain(e,minRespP,maxRespP)}return responsiveRatio}var baseurl="http://api.openweathermap.org/data/2.5/forecast?q=",city="Amsterdam, NL",country="NL",type="&type=like",mode="JSON",appid="&appid=9010cdbc3c106b77c2db30db4e547a9a",lang="&lang=nl",unit="&units=metric",url=baseurl+city+type+mode+appid+unit+lang,locationData,geolat,geolong,weatherData,windSpeed,amountRain,amountSnow,tempColor,temperature,weatherType,weatherDescription,raindrops=[],snowflakes=[],clouds=[],weerbeer,weathericon=[],weathericonsAmount=3,cloudicons=[],cloudpicker,timedata,nightorday,nightordayicon=[],weatherTime,date,hours,responsiveRatio,minRespL=.7,maxRespL=1,minRespP=.7,maxRespP=1.3,direction=1,standardFont,textsizestandard=48,buttonF,clearbutton,formCity;